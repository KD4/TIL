Kafka
===================================

카프카는 분산 스트리밍 플랫폼이다. 무슨 뜻일까?

스트리밍 플랫폼은 세 가지를 갖추어야한다. 
- mq 혹은 엔터프라이즈 메시징 시스템처럼 레코드 스트림을 pub/sub 할 수 있어야한다.
- 장애 감지, 내구성을 위해서 레코드 스트림을 저장할 수 있어야 한다.
- 레코드 스트림을 처리할 수 있어야한다.

카프카는 어플리케이션에서 사용될 때 두가지 방식으로 사용된다.
-  시스템 또는 애플리케이션간에 데이터를 안정적으로 얻는 실시간 스트리밍 데이터 파이프 라인 구축
- 데이터 스트림을 변환하거나 이에 반응하는 실시간 스트리밍 애플리케이션 구축

카프카는 클러스터로 구동된다.

topic이라는 단위로 레코드를 구분한다

각 레코드는 키, 벨류, 타임스탬프로 구성된다.

카프카는 네가지 중요 API로 구성된다.

- Producer API: 이 API를 사용해서 어플리케이션은 한 개 이상 토픽으로 데이터 레코드를 Publish할 수 있다.
- Consumer API: 이 API를 사용해서 어플리케이션은 한 개 이상의 토픽을 구독하고 데이터를 처리할 수 있다.
- Streams API: 이 API를 사용해서 어플리케이션은 특정 토픽으로부터 인풋스트림을 받아 데이터를 처리하거나 아웃풋 스트림으로 데이터를 보낼 수 있다. 
- Connector API: 이 API를 사용해서 재사용 가능한 프로듀서나 콘슈머를 실행하거나 만들 수 있다. 

카프카는 하위호환을 지키면서 프로토콜을 발전해나가고 있고 자바 이외에 여러 랭귀지로 만들어진 클라이언트가 있다.

### 토픽
레코드 흐름 구분하는 단위

### 파티션
각 토픽은 각 카프카 클러스터 내에 여러 파티션에 저장된다. 각 파티션에는 순서대로 쌓이는 데이터 위치값인 offset이란 단위가 존재한다. offset은 각 파티션에서 유니크하다. 
* 파티션이 여러 개 일 때 프로듀서가 메시지를 보낸 순서대로 컨슈머가 메시지를 받지는 않는다.


### 컨슈머 그룹
컨슈머들을 묶는 단위. 하나 이상의 토픽을 구독해서 같은 일을 하는 어플리케이션 묶음을 말한다. 
각 어플리케이션은 컨슈머 인스턴스라고하며 특정 파티션의 offset을 공유해서 다른 컨슈머 인스턴스가 읽은 레코드는 다른 컨슈머 인스턴스가 읽지 않는다.
이 때문에 파티션의 데이터를 동시에 읽어올 수 없기 때문에 N개의 파티션이 있는 토픽을 구독해서 사용할 때는 N개의 컨슈머 인스턴스를 두는 것이 좋다.